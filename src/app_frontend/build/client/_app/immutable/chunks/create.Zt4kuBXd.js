import"./disclose-version.Bg9kRutz.js";import{f as me,aB as de}from"./runtime.aXHnhyvJ.js";import{c as ge,a as ye}from"./template.eTO5rkRx.js";import{s as Ee,d as Ae}from"./misc.DnqR7_Mr.js";import{l as he,s as we}from"./props.BZlKUZyv.js";import{I as Te}from"./Icon.CwQCy4dD.js";import{d as Z,g as Oe,w as q,r as X,a as se}from"./index.B1KEFf-C.js";import{o as Me}from"./index-client.CQj2buiT.js";function st(e,n){const t=he(n,["children","$$slots","$$events","$$legacy"]);Te(e,we({type:"outline",name:"map-search"},()=>t,{iconNode:[["path",{d:"M11 18l-2 -1l-6 3v-13l6 -3l6 3l6 -3v7.5"}],["path",{d:"M9 4v13"}],["path",{d:"M15 7v5"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}],["path",{d:"M20.2 20.2l1.8 1.8"}]],children:(f,l)=>{var p=ge(),g=me(p);Ee(g,Ae(n),{}),ye(f,p)},$$slots:{default:!0}}))}function it(e,n){const t=he(n,["children","$$slots","$$events","$$legacy"]);Te(e,we({type:"outline",name:"x"},()=>t,{iconNode:[["path",{d:"M18 6l-12 12"}],["path",{d:"M6 6l12 12"}]],children:(f,l)=>{var p=ge(),g=me(p);Ee(g,Ae(n),{}),ye(f,p)},$$slots:{default:!0}}))}function ue(e){return Object.keys(e).reduce((n,t)=>e[t]===void 0?n:n+`${t}:${e[t]};`,"")}function _(e){return e?!0:void 0}ue({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function De(e,...n){const t={};for(const i of Object.keys(e))n.includes(i)||(t[i]=e[i]);return t}function J(e){const n={};for(const t in e){const i=e[t];i!==void 0&&(n[t]=i)}return n}function ce(e){function n(t){return t(e),()=>{}}return{subscribe:n}}function P(e){if(!oe)return null;const n=document.querySelector(`[data-melt-id="${e}"]`);return ee(n)?n:null}const Q=e=>new Proxy(e,{get(n,t,i){return Reflect.get(n,t,i)},ownKeys(n){return Reflect.ownKeys(n).filter(t=>t!=="action")}}),fe=e=>typeof e=="function";W("empty");function W(e,n){const{stores:t,action:i,returned:f}=n??{},l=(()=>{if(t&&f)return Z(t,g=>{const m=f(g);if(fe(m)){const y=(...$)=>Q(J({...m(...$),[`data-melt-${e}`]:"",action:i??I}));return y.action=i??I,y}return Q(J({...m,[`data-melt-${e}`]:"",action:i??I}))});{const g=f,m=g==null?void 0:g();if(fe(m)){const y=(...$)=>Q(J({...m(...$),[`data-melt-${e}`]:"",action:i??I}));return y.action=i??I,ce(y)}return ce(Q(J({...m,[`data-melt-${e}`]:"",action:i??I})))}})(),p=i??(()=>{});return p.subscribe=l.subscribe,p}function $e(e){const n=l=>l?`${e}-${l}`:e,t=l=>`data-melt-${e}${l?`-${l}`:""}`,i=l=>`[data-melt-${e}${l?`-${l}`:""}]`;return{name:n,attribute:t,selector:i,getEl:l=>document.querySelector(i(l))}}const oe=typeof document<"u";function ke(e){return e instanceof Element}function ee(e){return e instanceof HTMLElement}function Le(e){return e instanceof HTMLInputElement}function V(...e){return(...n)=>{for(const t of e)typeof t=="function"&&t(...n)}}function I(){}function pe(e,n,t,i){const f=Array.isArray(n)?n:[n];return f.forEach(l=>e.addEventListener(l,t,i)),()=>{f.forEach(l=>e.removeEventListener(l,t,i))}}function T(e,n,t,i){const f=Array.isArray(n)?n:[n];if(typeof t=="function"){const l=Ne(p=>t(p));return f.forEach(p=>e.addEventListener(p,l,i)),()=>{f.forEach(p=>e.removeEventListener(p,l,i))}}return()=>void 0}function _e(e){const n=e.currentTarget;if(!ee(n))return null;const t=new CustomEvent(`m-${e.type}`,{detail:{originalEvent:e},cancelable:!0});return n.dispatchEvent(t),t}function Ne(e){return n=>{const t=_e(n);if(!(t!=null&&t.defaultPrevented))return e(n)}}const He=e=>{try{Me(e)}catch{return e}};function B(e){return{...e,get:()=>Oe(e)}}B.writable=function(e){const n=q(e);let t=e;return{subscribe:n.subscribe,set(i){n.set(i),t=i},update(i){const f=i(t);n.set(f),t=f},get(){return t}}};B.derived=function(e,n){const t=new Map,i=()=>{const l=Array.isArray(e)?e.map(p=>p.get()):e.get();return n(l)};return{get:i,subscribe:l=>{const p=[];return(Array.isArray(e)?e:[e]).forEach(m=>{p.push(m.subscribe(()=>{l(i())}))}),l(i()),t.set(l,p),()=>{const m=t.get(l);if(m)for(const y of m)y();t.delete(l)}}}};const We=(e,n)=>{const t=B(e),i=(l,p)=>{t.update(g=>{const m=l(g);let y=m;return n&&(y=n({curr:g,next:m})),p==null||p(y),y})};return{...t,update:i,set:l=>{i(()=>l)}}};let Ve="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",qe=(e=21)=>{let n="",t=e;for(;t--;)n+=Ve[Math.random()*64|0];return n};function K(){return qe(10)}function Be(e){return e.reduce((n,t)=>(n[t]=K(),n),{})}const D={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};function ie(e,n=500){let t;const i=(...f)=>{clearTimeout(t),t=setTimeout(()=>e(...f),n)};return i.destroy=()=>clearTimeout(t),i}function Y(e,n,t={}){const{skipFirstRun:i}=t;let f=!0,l;const p=Z(e,m=>{l==null||l(),f&&i?f=!1:l=n(m)}).subscribe(I),g=()=>{p(),l==null||l()};return He(g),g}function Ue(e){const n={};return Object.keys(e).forEach(t=>{const i=t,f=e[i];n[i]=B(q(f))}),n}function Ie(e,n){return e===n||e.contains(n)}function Ke(e){return(e==null?void 0:e.ownerDocument)??document}X(!1),X(!1),X(void 0),X(void 0);const le=new Set,Ge=(e,n={})=>{let t=I,i=I,f=I,l=I;le.add(e);const p=Ke(e);let g=!1,m=!1;const y={pointerdown:!1,pointerup:!1,mousedown:!1,mouseup:!1,touchstart:!1,touchend:!1,click:!1},$=()=>{for(const E in y)y[E]=!1},G=()=>{for(const E of Object.values(y))if(E)return!0;return!1},C=(E,A)=>pe(p,E,x=>{y[E]=!0,A==null||A(x)},!0),O=(E,A)=>pe(p,E,x=>{y[E]=!1,A==null||A(x)});function j(E){t(),i(),f(),l(),$();const{onInteractOutside:A,onInteractOutsideStart:x,enabled:re}={enabled:!0,...E};if(!re)return;let F=!1;const b=ie(M=>{if(!F||G())return;A&&be(M,e)&&(x==null||x(M));const N=M.target;ke(N)&&Ie(e,N)&&(m=!0),g=!0},10);i=b.destroy;const w=ie(M=>{F&&!G()&&te(M)&&(A==null||A(M)),ne()},10);f=w.destroy;const k=ie($,20);l=k.destroy;const L=()=>{F=je(e)};t=V(C("pointerdown",L),C("mousedown",L),C("touchstart",L),C("pointerup",k),C("mouseup",k),C("touchend",k),C("click",k),O("pointerdown",b),O("mousedown",b),O("touchstart",b),O("pointerup",w),O("mouseup",w),O("touchend",w),O("click",w))}function te(E){return!!(g&&!m&&be(E,e))}function ne(){g=!1,m=!1}return j(n),{update:j,destroy(){t(),i(),f(),l(),le.delete(e)}}};function be(e,n){if("button"in e&&e.button>0)return!1;const t=e.target;if(!ke(t))return!1;const i=t.ownerDocument;return!i||!i.documentElement.contains(t)?!1:n&&!Ie(n,t)}function je(e){return Array.from(le).at(-1)===e}const ze={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...De(ze,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});function R(e,n="default"){const t=P(e);Le(t)&&(t.focus(),n==="start"?t.setSelectionRange(0,0):n==="end"&&t.setSelectionRange(t.value.length,t.value.length))}function S(e,n){if(!e){n.set(null);return}n.set({id:e.getAttribute("data-tag-id")??"",value:e.getAttribute("data-tag-value")??""})}function ve(e){const n=document.querySelector(e);if(!ee(n))return;n.focus();const t=document.createRange();t.selectNodeContents(n);const i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(t))}const Xe={placeholder:"",disabled:!1,editable:!0,defaultTags:[],unique:!1,trim:!0,blur:"nothing",addOnPaste:!1,maxTags:void 0,allowed:[],denied:[],add:void 0,remove:void 0,update:void 0},{name:U,attribute:Je,selector:H}=$e("tags-input");function ut(e){const n={...Xe,...e},t=Be(["root","input"]),i=Ue(De(n,"tags")),{placeholder:f,disabled:l,editable:p,unique:g,trim:m,blur:y,addOnPaste:$,allowed:G,denied:C,add:O,remove:j,update:te,maxTags:ne}=i,E=q(""),A=q(!1),x=q(""),re=n.tags??q(n.defaultTags&&n.defaultTags.length>0?typeof n.defaultTags[0]=="string"?n.defaultTags.map(r=>({id:K(),value:r})):n.defaultTags:[]),F=We(re,n==null?void 0:n.onTagsChange),b=B.writable(n.selected??null),w=B.writable(null),k=r=>{const u=F.get(),c=w.get(),s=G.get(),a=C.get(),o=ne.get();return m.get()&&(r=r.trim()),!(g.get()&&(c==null?void 0:c.value)!==r&&u.findIndex(v=>v.value===r)>=0||s&&s.length>0&&!s.includes(r)||a&&a.length>0&&a.includes(r)||o&&o>0&&u.length>=o)},L=async r=>{const u=O.get();let c={id:"",value:r};if(u)try{const s=await u(r);typeof s=="string"?c.value=s:c=s,c.id||(c.id=K())}catch{return!1}else c.id=K();return m.get()&&(c.value=c.value.trim()),k(c.value)?(F.update(s=>(s.push(c),s)),!0):!1};async function M(r,u=!1){const c=te.get(),s=r.id;let a=r;if(c)try{a=await c(a),a.id||(a.id=K())}catch{return!1}return m.get()&&(a.value=a.value.trim()),k(a.value)?(F.update(o=>o.map(d=>d.id===s?a:d)),u&&b.set(a),!0):!1}async function N(r){const u=j.get();if(u)try{if(!await u(r))return!1}catch{return!1}const s=F.get().findIndex(a=>a.id===r.id);return F.update(a=>(a.splice(s,1),a)),!0}const ae=Z([p,w],([r,u])=>c=>r&&(u==null?void 0:u.id)===c.id),xe=W(U(""),{stores:[l],returned:([r])=>({"data-melt-id":t.root,"data-disabled":_(r),disabled:_(r)}),action:r=>({destroy:V(T(r,"mousedown",c=>{const s=c.target;ee(s)&&s.hasAttribute(Je())&&(c.preventDefault(),R(t.input))}))})}),Pe=W(U("input"),{stores:[l,f],returned:([r,u])=>({"data-melt-id":t.input,"data-disabled":_(r),disabled:_(r),placeholder:u}),action:r=>{const u=s=>{const a=P(t.root);let o=[],d=-1,v=-1,h=-1;return a&&(o=Array.from(a.querySelectorAll(H("tag"))),d=o.findIndex(z=>z.getAttribute("data-tag-id")===s),v=d-1,h=d+1),{tagsEl:o,selectedIndex:d,prevIndex:v,nextIndex:h}};return{destroy:V(T(r,"focus",()=>{const s=P(t.root);s&&s.setAttribute("data-focus",""),r.setAttribute("data-focus","")}),T(r,"blur",async()=>{const s=P(t.root);s&&s.removeAttribute("data-focus"),r.removeAttribute("data-focus"),b.set(null);const a=r.value;if(!a)return;const o=y.get();o==="clear"?r.value="":o==="add"&&(k(a)&&await L(a)?(r.value="",E.set("")):A.set(!0))}),T(r,"paste",async s=>{var d;const a=(d=s.clipboardData)==null?void 0:d.getData("text");if(!a||!$.get())return;s.preventDefault();const o=a.split(",");e:for(let v=0;v<o.length;v++){const h=o[v];if(k(h)&&await L(h))continue e;r.value=o.slice(v).join(","),A.set(!0);return}}),T(r,"keydown",async s=>{const a=b.get();if(a){if(s.key.length===1)b.set(null);else if(s.key===D.ARROW_LEFT){s.preventDefault();const{tagsEl:o,prevIndex:d}=u(a.id);d>=0&&S(o[d],b)}else if(s.key===D.ARROW_RIGHT){s.preventDefault();const{tagsEl:o,nextIndex:d}=u(a.id);d===-1||d>=o.length?(b.set(null),R(t.input,"start")):S(o[d],b)}else if(s.key===D.HOME){s.preventDefault();const{tagsEl:o}=u(a.id);o.length>0&&S(o[0],b)}else if(s.key===D.END)s.preventDefault(),b.set(null),R(t.input);else if(s.key===D.DELETE){s.preventDefault();const o=a,{tagsEl:d,nextIndex:v}=u(a.id);v===-1||v>=d.length?(b.set(null),R(t.input)):S(d[v],b),await N(o)||b.set(o)}else if(s.key===D.BACKSPACE){s.preventDefault();const o=a,{tagsEl:d,nextIndex:v,prevIndex:h}=u(a.id);h>=0?S(d[h],b):v===-1||v>=d.length?(b.set(null),R(t.input,"start")):S(d[v],b),await N(o)||b.set(o)}else if(s.key===D.ENTER){s.preventDefault();const o=document.querySelector(H("edit")+`[data-tag-id="${a.id}"]`);if(!o)return;w.set({id:a.id,value:a.value}),o.textContent=a.value,await de(),ve(H("edit")+`[data-tag-id="${a.id}"]`)}}else if(s.key===D.ENTER){s.preventDefault();const o=r.value;if(!o)return;k(o)&&await L(o)?(r.value="",E.set("")):A.set(!0)}else if(r.selectionStart===0&&r.selectionEnd===0&&(s.key===D.ARROW_LEFT||s.key===D.BACKSPACE)){s.preventDefault();const{tagsEl:o}=u(""),d=o.at(-1);if(!d)return;S(d,b)}}),T(r,"input",()=>{E.set(r.value)}))}}}),Fe=W(U("tag"),{stores:[b,w,l,p],returned:([r,u,c,s])=>a=>{const o=c||a.disabled,d=s&&a.editable!==!1,v=o?void 0:(r==null?void 0:r.id)===(a==null?void 0:a.id),h=d?(u==null?void 0:u.id)===(a==null?void 0:a.id):void 0;return{"aria-hidden":h,"aria-selected":v,"data-tag-id":a.id,"data-tag-value":a.value,"data-selected":v?"":void 0,"data-editable":d?"":void 0,"data-editing":h?"":void 0,"data-disabled":_(o),disabled:_(o),hidden:h,tabindex:-1,style:h?ue({position:"absolute",opacity:0,"pointer-events":"none",margin:0}):void 0}},action:r=>{const u=()=>({id:r.getAttribute("data-tag-id")??""});return{destroy:V(T(r,"mousedown",s=>{const a=w.get();a&&a.id!==u().id||(R(t.input),s.preventDefault(),S(r,b),w.set(null))}),T(r,"click",s=>{const a=w.get();a&&a.id===u().id||(R(t.input),s.preventDefault(),S(r,b),w.set(null))}),T(r,"dblclick",async()=>{if(!oe||!r.hasAttribute("data-editable"))return;const s=document.querySelector(H("edit")+`[data-tag-id="${u().id}"]`);if(!s)return;const a=r.getAttribute("data-tag-value")??"";w.set({id:r.getAttribute("data-tag-id")??"",value:a}),s.textContent=a,await de(),ve(H("edit")+`[data-tag-id="${u().id}"]`)}))}}}),Re=W(U("delete-trigger"),{stores:[b,w,l,p],returned:([r,u,c,s])=>a=>{const o=c||a.disabled,d=s&&a.editable!==!1,v=o?void 0:(r==null?void 0:r.id)===(a==null?void 0:a.id),h=d?(u==null?void 0:u.id)===(a==null?void 0:a.id):void 0;return{"aria-selected":v,"data-tag-id":a.id,"data-tag-value":a.value,"data-selected":v?"":void 0,"data-editing":h?"":void 0,"data-disabled":_(o),disabled:_(o),tabindex:-1}},action:r=>{function u(){if(r.hasAttribute("data-disabled"))return;const s=r.getAttribute("data-tag-value")??"",a=r.getAttribute("data-tag-id")??"";N({id:a,value:s}),R(t.input)}return{destroy:V(T(r,"click",s=>{s.stopPropagation(),u()}),T(r,"keydown",s=>{s.key!==D.ENTER&&s.key!==D.SPACE||(s.preventDefault(),u())}))}}}),Se=W(U("edit"),{stores:ae,returned:r=>u=>{const c=r(u);return{"aria-hidden":!c,"data-tag-id":u.id,"data-tag-value":u.value,hidden:c?void 0:!0,contenteditable:c,tabindex:-1,style:c?void 0:ue({position:"absolute",opacity:0,"pointer-events":"none",margin:0})}},action:r=>{const u=()=>{const o=r.getAttribute("data-tag-id")??"",d=r.getAttribute("data-tag-value")??"";return{id:o,value:d}};let c=I,s=I;const a=Y(ae,o=>{c(),s(),o(u())&&(c=Ge(r).destroy,s=V(T(r,"blur",()=>{var d;w.set(null),r.textContent=u().value,(d=P(t.root))==null||d.removeAttribute("data-invalid-edit"),r.removeAttribute("data-invalid-edit")}),T(r,"keydown",async d=>{var v;if(d.key===D.ENTER){d.preventDefault();const h=r.textContent;if(!h)return;const z={id:u().id,value:h};k(h)&&await M(z,!0)?(r.textContent=z.value,x.set(""),R(t.input)):((v=P(t.root))==null||v.setAttribute("data-invalid-edit",""),r.setAttribute("data-invalid-edit",""))}else d.key===D.ESCAPE&&(d.preventDefault(),d.stopImmediatePropagation(),r.textContent=u().value,x.set(""),S(r,b),R(t.input))}),T(r,"input",()=>{x.set(r.textContent||"")})))});return{destroy(){c(),s(),a()}}}}),Ce=Z(b,r=>u=>(r==null?void 0:r.id)===u.id);return Y(E,()=>{A.set(!1)}),Y(A,r=>{var u,c,s,a;r?((u=P(t.root))==null||u.setAttribute("data-invalid",""),(c=P(t.input))==null||c.setAttribute("data-invalid","")):((s=P(t.root))==null||s.removeAttribute("data-invalid"),(a=P(t.input))==null||a.removeAttribute("data-invalid"))}),Y(x,()=>{var u;if(!oe)return;(u=P(t.root))==null||u.removeAttribute("data-invalid-edit"),Array.from(document.querySelectorAll(H("edit")+"[data-invalid-edit]")).forEach(c=>{c.removeAttribute("data-invalid-edit")})}),{ids:t,elements:{root:xe,input:Pe,deleteTrigger:Re,edit:Se,tag:Fe},states:{tags:F,inputValue:se(E),inputInvalid:se(A),selected:se(b)},helpers:{isSelected:Ce,isEditing:ae,isInputValid:k,addTag:L,updateTag:M,removeTag:N},options:i}}export{st as M,it as X,We as a,$e as b,ut as c,W as m,De as o,Ue as t};
